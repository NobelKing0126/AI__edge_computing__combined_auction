# 实验大纲：UAV辅助边缘计算DNN协同推理拍卖调度框架

---

## 一、实验目标

1. 验证所提框架的有效性与性能优势
2. 分析各核心组件的贡献（消融实验）
3. 评估系统在不同场景下的鲁棒性与可扩展性
4. 验证理论分析的正确性（Checkpoint阈值、凸优化最优性、对偶间隙）

---

## 二、实验环境设置

### 2.1 仿真平台

| 组件 | 建议工具 |
|------|---------|
| 网络仿真 | Python自建 / NS-3 |
| DNN模型 | PyTorch（提取层结构） |
| 优化求解 | CVXPY / SciPy |
| 可视化 | Matplotlib / Seaborn |

### 2.2 DNN模型选择

| 模型 | 层数$L$ | 总FLOPs | 输入大小 | 推理时间(RTX3090) | 应用场景 |
|------|--------|---------|---------|------------------|---------|
| VGG-16 | 39 | 15.5G | 224×224×3 | 2.54ms | 图像分类 |
| ResNet-50 | 18 | 4.1G | 224×224×3 | 2.86ms | 图像分类 |
| MobileNetV2 | 22 | 0.3G | 224×224×3 | 2.48ms | 轻量级 |
| YOLOv5s | - | 7.2G | 640×640×3 | 4.29ms | 目标检测 |

**注**: 层数为实际分割推理时的模块划分数，非原始网络层数。
### 2.3 默认系统参数

| 参数 | 符号 | 默认值 | 变化范围（敏感性分析） |
|------|------|--------|----------------------|
| 用户数量 | $M$ | 50 | [20, 100, 200] |
| UAV数量 | $N$ | 5 | [3, 5, 8] |
| UAV最大算力 | $f^{max}$ | 10 GFLOPS | [5, 10, 20] |
| UAV电池容量 | $E^{max}$ | 500 kJ | [300, 500, 800] |
| 信道带宽 | $W$ | 20 MHz | [10, 20, 40] |
| 回程带宽 | $R_{backhaul}$ | 100 Mbps | [50, 100, 200] |
| 云端算力 | $F_c$ | 500 GFLOPS | [200, 500, 1000] |
| UAV飞行高度 | $H$ | 100 m | 固定 |
| 场景尺寸 | - | 2km × 2km | [1×1, 2×2, 4×4] km² |
| 任务最大时延 | $\tau^{max}$ | 1-5 s | 均匀分布 |
| 用户等级 | $UserLevel$ | 1-5 | 均匀分布 |
| 故障概率 | $p_{fault}$ | 0.05 | [0, 0.05, 0.1, 0.2] |

### 2.4 用户分布模式

| 模式 | 描述 | 参数 |
|------|------|------|
| 均匀分布 | 用户均匀分布于场景 | - |
| 热点分布 | 3-5个高斯热点 | $\sigma = 200$m |
| 边缘分布 | 用户集中于场景边缘 | 边缘宽度200m |
| 动态分布 | 用户位置随时间变化 | 移动速度1-5m/s |

---

## 三、对比基线算法

### 3.1 基线算法列表

| 编号 | 算法名称 | 描述 |
|------|---------|------|
| B1 | **全边缘** | 所有任务在UAV本地执行（$l=L$） |
| B2 | **全云端** | 所有任务卸载到云端（$l=0$） |
| B4 | **贪心算法** | 按优先级贪心分配，无拍卖 |
| B5 | **固定切分** | 预定义$K$个切分点（原设计） |
| B6 | **无主动推理** | 移除自由能，效用不含风险修正 |
| B7 | **无Checkpoint** | 禁用Checkpoint机制 |
| B8 | **启发式算力分配** | 使用原启发式而非凸优化 |
| B10 | **无动态定价** | 固定价格，无反馈调节 |

### 3.2 消融变体

| 编号 | 变体名称 | 移除/替换组件 |
|------|---------|--------------|
| A1 | w/o 自由能融合 | $\eta^{final} = \omega_i \cdot \eta^{stage2}$（无指数衰减） |
| A2 | w/o Checkpoint | $x_{cp} = 0$（禁用） |
| A3 | w/o 凸优化 | 使用启发式算力分配 |
| A4 | w/o 高优先级约束 | 所有任务$\leq 1$约束 |
| A5 | w/o 功率约束 | 移除C8约束 |
| A6 | w/o 多策略贪心 | 仅使用优先级排序策略 |
| A7 | w/o 动态定价 | 固定价格 |
| A8 | 线性安全修正 | $\lambda^{safe} = \max(0.1, 1-\tilde{F}/\tilde{F}_{th})$ |

---

## 四、性能评估指标

### 4.1 主要指标

| 指标 | 公式 | 说明 |
|------|------|------|
| **社会福利** | $SW = \sum_{i \in accepted} \eta_{i,l,j}^{final}$ | 核心优化目标 |
| **任务完成率** | $\frac{|\mathcal{U}_{completed}|}{M}$ | 成功完成比例 |
| **高优先级完成率** | $\frac{|\mathcal{U}_{completed} \cap \mathcal{U}_{high}|}{|\mathcal{U}_{high}|}$ | 关键任务保障 |
| **平均端到端时延** | $\bar{T} = \frac{1}{|\mathcal{U}_{completed}|}\sum_i T_i^{actual}$ | 用户体验 |
| **时延满足率** | $\frac{|\{i: T_i^{actual} \leq \tau_i^{max}\}|}{M}$ | QoS保障 |
| **系统总能耗** | $E_{system} = \sum_j E_j^{consumed} + E_{cloud}$ | 能效 |
| **能效比** | $\frac{|\mathcal{U}_{completed}|}{E_{system}}$ | 单位能耗完成任务数 |

### 4.2 资源利用指标

| 指标 | 公式 | 说明 |
|------|------|------|
| UAV平均算力利用率 | $\bar{Util}^{compute} = \frac{1}{N}\sum_j Util_j^{compute}$ | 算力效率 |
| UAV负载均衡指数 | $JFI = \frac{(\sum_j Util_j)^2}{N \cdot \sum_j Util_j^2}$ | 公平性 |
| 云端利用率 | $Util^{cloud} = \frac{F_c^{used}}{F_c}$ | 云端效率 |
| 信道利用率 | $\frac{|\mathcal{S}^{used}|}{|\mathcal{S}|}$ | 通信效率 |

### 4.3 鲁棒性指标

| 指标 | 公式 | 说明 |
|------|------|------|
| 故障恢复成功率 | $\frac{|\mathcal{U}_{recovered}|}{|\mathcal{U}_{failed}|}$ | 容错能力 |
| 平均恢复时延 | $\bar{T}_{recovery}$ | 恢复效率 |
| Checkpoint成功率 | $\frac{N_{cp,success}}{N_{cp,attempt}}$ | 备份可靠性 |
| 恢复时延节省比 | $\frac{\Delta T^{cp=0} - \Delta T^{cp=1}}{\Delta T^{cp=0}}$ | Checkpoint价值 |

### 4.4 算法效率指标

| 指标 | 说明 |
|------|------|
| 投标生成时间 | 阶段2耗时 |
| 拍卖决策时间 | 阶段3耗时 |
| 对偶迭代次数 | 收敛所需迭代 |
| 对偶间隙 | $Gap/SW^*$ |

---

## 五、实验设计

### 实验1：整体性能对比

**目的**：验证所提框架相对于基线的整体优势

**设置**：
- 默认参数配置
- 运行100轮，取平均值
- 对比B1-B10所有基线

**评估指标**：社会福利、任务完成率、平均时延、系统能耗

**预期结果**：
- 社会福利提升15-30%（相对B4贪心）
- 高优先级完成率接近100%
- 时延满足率优于全边缘/全云端

---

### 实验2：消融实验

**目的**：分析各核心组件的贡献

**设置**：
- 依次移除各组件（A1-A8）
- 与完整框架对比

**评估指标**：社会福利变化、任务完成率变化

**子实验**：

| 子实验 | 对比 | 验证点 |
|--------|------|--------|
| 2.1 | 完整 vs A1 | 自由能指数衰减的价值 |
| 2.2 | 完整 vs A2 | Checkpoint机制的价值 |
| 2.3 | 完整 vs A3 | 凸优化vs启发式 |
| 2.4 | 完整 vs A4 | 高优先级强制约束的必要性 |
| 2.5 | 完整 vs A5 | 功率约束的影响 |
| 2.6 | 完整 vs A6 | 多策略贪心的价值 |
| 2.7 | 完整 vs A7 | 动态定价的闭环价值 |
| 2.8 | 完整 vs A8 | 指数vs线性安全修正 |

**预期结果**：
- 自由能融合贡献5-10%社会福利提升
- Checkpoint在高故障率下显著降低失败率
- 凸优化比启发式提升3-8%时延性能

---

### 实验3：可扩展性分析

**目的**：评估框架在不同规模下的表现

**设置**：

| 参数 | 变化范围 |
|------|---------|
| 用户数$M$ | [20, 50, 100, 200, 500] |
| UAV数$N$ | [3, 5, 8, 10] |
| 模型层数$L$ | [16, 21, 50, 100] |

**评估指标**：
- 社会福利随规模变化
- 算法运行时间
- 资源利用率

**预期结果**：
- 社会福利随$M$增加近线性增长（资源允许时）
- 运行时间$O(M \cdot L \cdot N)$可接受
- 大规模场景下多策略贪心优势更明显

---

### 实验4：鲁棒性分析

**目的**：评估框架在故障场景下的表现

**设置**：

| 子实验 | 参数变化 |
|--------|---------|
| 4.1 UAV故障 | $p_{fault} \in [0, 0.05, 0.1, 0.2, 0.3]$ |
| 4.2 信道波动 | $\sigma_R \in [0.1R, 0.2R, 0.3R, 0.5R]$ |
| 4.3 算力波动 | $\sigma_f \in [0.1f, 0.2f, 0.3f]$ |
| 4.4 拍卖方故障 | 主拍卖方在执行中故障 |

**评估指标**：
- 故障恢复成功率
- 任务完成率变化
- Checkpoint收益

**预期结果**：
- Checkpoint机制使高故障率下完成率提升20-40%
- 主/备拍卖方机制实现无缝切换
- 自由能有效预测高风险方案

---

### 实验5：Checkpoint理论验证

**目的**：验证Checkpoint收益界的理论正确性

**设置**：
- 固定$\gamma_{cp} = 0.1$ s/MB
- 变化故障概率$p_{fail} \in [0.01, 0.5]$
- 变化$OutputSize_{l_{cp}}$

**评估指标**：
- 实际Checkpoint收益 vs 理论预测$\mathbb{E}[收益] = p_{fail} \cdot \Delta T_{save} - T_{cp}$
- Checkpoint启用决策的准确率

**分析**：
- 绘制$p_{fail}$与Checkpoint收益的关系曲线
- 验证$p_{threshold} = T_{cp}/\Delta T_{save}$的正确性
- 识别Checkpoint有益的临界条件

---

### 实验6：凸优化最优性验证

**目的**：验证四组闭型解覆盖所有最优解

**设置**：
- 随机生成1000组$(C^{edge}, C^{cloud}, E^{budget}, T^{budget})$
- 对比四组闭型解与数值优化（CVXPY）结果

**评估指标**：
- 时延误差：$|T_{closed-form} - T_{cvxpy}|/T_{cvxpy}$
- 可行解覆盖率
- 求解时间对比

**预期结果**：
- 闭型解与数值解误差$< 10^{-6}$（数值精度）
- 100%可行解覆盖
- 闭型解速度提升1000倍以上

---

### 实验7：切分点扩展效果

**目的**：对比所有层切分 vs 预定义切分点

**设置**：
- 完整框架（$\mathcal{L}^{cut} = \{0,...,L\}$）
- 基线B5（$K \in \{5, 8, 10\}$个预定义点）

**评估指标**：
- 社会福利
- 最优切分点分布
- 运行时间

**预期结果**：
- 所有层切分提升5-15%社会福利
- 最优切分点常出现在非预定义位置
- 预筛选有效控制复杂度增加

---

### 实验8：动态定价闭环效果

**目的**：验证价格反馈机制的收敛性与效果

**设置**：
- 多轮拍卖（10-50轮）
- 观察价格演化与资源利用率变化

**评估指标**：
- 价格收敛速度
- 负载均衡改进
- 拥塞缓解效果

**预期结果**：
- 价格在5-10轮内趋于稳定
- 负载均衡指数$JFI$从0.7提升至0.9+
- 热点UAV负载有效分流

---

### 实验9：用户分布敏感性

**目的**：评估不同用户分布下的框架表现

**设置**：
- 均匀分布、热点分布、边缘分布、动态分布

**评估指标**：
- 各分布下的社会福利
- UAV部署质量
- 重定位触发频率

**预期结果**：
- 加权K-means对热点分布适应良好
- 动态分布触发重定位机制
- 边缘分布下覆盖挑战更大

---

### 实验10：参数敏感性分析

**目的**：识别关键参数的影响

**设置**：

| 参数组 | 变化参数 |
|--------|---------|
| 10.1 优先级权重 | $(\alpha_1, \alpha_2, \alpha_3, \alpha_4)$ |
| 10.2 效用权重 | $(\beta_1, \beta_2, \beta_3)$ |
| 10.3 自由能阈值 | $\tilde{F}_{threshold} \in [15, 30, 50, 100]$ |
| 10.4 Top-K值 | $K \in [5, 10, 20, 50]$ |
| 10.5 迭代参数 | $\epsilon_0, T_{max}$ |

**评估指标**：社会福利变化、敏感度分析

---

### 实验11：实时性验证

**目的**：验证算法满足时间约束

**设置**：
- 测量各阶段实际运行时间
- 不同规模$(M, N, L)$配置

**评估指标**：

| 阶段 | 时间约束 |
|------|---------|
| 阶段1（选举） | $T_{election} \leq 0.5$s |
| 阶段2（投标） | $T_{bid} \leq 200$ms |
| 阶段3（拍卖） | $T_{auction} \leq 100$ms |
| 端到端 | $T_{total} < 1$s |

---

### 实验12：对偶间隙分析

**目的**：验证对偶分解的求解质量

**设置**：
- 对比对偶解与整数规划精确解（小规模）
- 分析间隙随规模变化

**评估指标**：
- $Gap = g^* - SW^*$
- $Gap/SW^*$百分比
- 可行解质量

**预期结果**：
- 对偶间隙$< 5\%$
- 多策略贪心有效缩小间隙

---

## 六、实验结果呈现

### 6.1 图表类型

| 图表 | 用途 | 实验 |
|------|------|------|
| 柱状图 | 基线对比 | 实验1 |
| 消融柱状图 | 组件贡献 | 实验2 |
| 折线图 | 规模变化 | 实验3, 8 |
| 箱线图 | 分布统计 | 实验4 |
| 散点图 | 理论验证 | 实验5, 6 |
| 热力图 | 参数敏感性 | 实验10 |
| CDF曲线 | 时延分布 | 实验1, 4 |
| 收敛曲线 | 迭代过程 | 实验8 |

### 6.2 统计检验

- 重复实验次数：30-100次
- 置信区间：95%
- 显著性检验：t-test或Wilcoxon检验

---

## 七、实验执行计划

| 阶段 | 内容 | 时间 |
|------|------|------|
| 准备阶段 | 仿真平台搭建、DNN模型分析 | 2周 |
| 基础实验 | 实验1-3（对比、消融、扩展） | 3周 |
| 深度实验 | 实验4-8（鲁棒性、理论验证） | 3周 |
| 补充实验 | 实验9-12（敏感性、实时性） | 2周 |
| 结果分析 | 图表制作、结论总结 | 2周 |

---

## 八、预期结论

1. **整体性能**：所提框架在社会福利、任务完成率、时延方面全面优于基线
2. **组件价值**：自由能融合、Checkpoint、凸优化各贡献显著性能提升
3. **理论正确性**：Checkpoint阈值、凸优化最优性得到实验验证
4. **鲁棒性**：框架在高故障率、高波动环境下保持稳定
5. **可扩展性**：算法复杂度可控，满足实时性要求
6. **实用性**：参数设置有明确指导，易于实际部署

---
